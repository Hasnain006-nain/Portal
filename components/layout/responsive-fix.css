/* ============================================
   COMPREHENSIVE RESPONSIVE FIXES
   ============================================ */

/* Prevent horizontal scroll on all devices */
html,
body,
#root {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100% !important;
}

/* Ensure all containers respect viewport width */
* {
    box-sizing: border-box !important;
}

/* Main content area responsive fixes */
main {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
}

/* Grid responsive fixes */
.grid {
    width: 100% !important;
    max-width: 100% !important;
}

.grid>* {
    min-width: 0 !important;
    max-width: 100% !important;
}

/* Card responsive fixes */
[class*="Card"],
[class*="card"] {
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Mobile (< 640px) */
@media (max-width: 639px) {

    /* Compact padding on mobile */
    main {
        padding: 0.75rem !important;
    }

    /* Smaller text on mobile */
    h1 {
        font-size: 1.5rem !important;
    }

    h2 {
        font-size: 1.25rem !important;
    }

    h3 {
        font-size: 1.125rem !important;
    }

    /* Compact cards */
    [class*="Card"] {
        padding: 0.75rem !important;
    }

    /* Tighter grid gaps */
    .grid {
        gap: 0.5rem !important;
    }

    /* Stack buttons vertically on mobile */
    .flex.gap-2>button,
    .flex.gap-3>button {
        width: 100% !important;
    }
}

/* Tablet (640px - 1023px) */
@media (min-width: 640px) and (max-width: 1023px) {
    main {
        padding: 1rem 1.5rem !important;
    }

    h1 {
        font-size: 1.75rem !important;
    }

    h2 {
        font-size: 1.5rem !important;
    }

    h3 {
        font-size: 1.25rem !important;
    }

    [class*="Card"] {
        padding: 1rem !important;
    }

    .grid {
        gap: 0.75rem !important;
    }
}

/* Desktop (>= 1024px) */
@media (min-width: 1024px) {
    main {
        padding: 1.5rem 2rem !important;
    }

    [class*="Card"] {
        padding: 1.25rem !important;
    }

    .grid {
        gap: 1rem !important;
    }
}

/* Large Desktop (>= 1280px) */
@media (min-width: 1280px) {
    main {
        padding: 2rem !important;
    }

    [class*="Card"] {
        padding: 1.5rem !important;
    }

    .grid {
        gap: 1.5rem !important;
    }
}

/* Ultra-wide (>= 1920px) */
@media (min-width: 1920px) {
    main {
        padding: 2.5rem 3rem !important;
    }

    [class*="Card"] {
        padding: 2rem !important;
    }

    .grid {
        gap: 2rem !important;
    }
}

/* Landscape mobile optimization */
@media (max-width: 896px) and (orientation: landscape) and (max-height: 500px) {

    /* Compact everything for landscape mobile */
    nav {
        height: 3rem !important;
        min-height: 3rem !important;
    }

    main {
        padding: 0.5rem !important;
    }

    [class*="Card"] {
        padding: 0.5rem !important;
    }

    .grid {
        gap: 0.375rem !important;
    }

    h1 {
        font-size: 1.25rem !important;
    }

    h2 {
        font-size: 1.125rem !important;
    }

    h3 {
        font-size: 1rem !important;
    }
}

/* iPad specific fixes */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) {

    /* Ensure no horizontal scroll on iPad */
    body {
        overflow-x: hidden !important;
        width: 100vw !important;
    }

    main {
        width: 100% !important;
        max-width: 100% !important;
    }

    /* Portrait mode */
    @media (orientation: portrait) {
        main {
            padding: 1rem !important;
        }

        .grid {
            gap: 0.75rem !important;
        }

        /* Force 2 columns for 4-column grids */
        [class*="md:grid-cols-4"] {
            grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
        }
    }

    /* Landscape mode */
    @media (orientation: landscape) {
        main {
            padding: 0.75rem 1rem !important;
        }

        .grid {
            gap: 0.625rem !important;
        }

        /* Compact navbar for limited height */
        nav {
            height: 3.5rem !important;
            min-height: 3.5rem !important;
        }
    }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {

    /* Larger touch targets */
    button {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* Remove hover effects on touch devices */
    [class*="hover:scale-"] {
        transform: none !important;
    }

    /* Always show action buttons on touch devices */
    .group .opacity-0 {
        opacity: 1 !important;
    }
}

/* Prevent text overflow */
.truncate {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

/* Ensure images don't overflow */
img {
    max-width: 100% !important;
    height: auto !important;
}

/* Dialog/Modal responsive fixes */
[role="dialog"] {
    max-width: 95vw !important;
    max-height: 95vh !important;
}

/* Accessibility - Reduced motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ============================================
   ZOOM RESPONSIVENESS FIXES
   ============================================ */

/* Detect zoom using resolution and viewport width */

/* 125% Zoom (1.25x) */
@media (min-resolution: 1.25dppx) and (min-width: 1024px),
(max-width: 1536px) and (min-width: 1280px) {

    /* Reduce padding on all cards */
    [class*="Card"],
    [class*="card"] {
        padding: 0.875rem !important;
    }

    /* Reduce grid gaps */
    .grid {
        gap: 0.75rem !important;
    }

    /* Smaller text */
    h1 {
        font-size: 1.75rem !important;
    }

    h2 {
        font-size: 1.5rem !important;
    }

    h3 {
        font-size: 1.25rem !important;
    }

    /* Reduce main content padding */
    main {
        padding: 1.5rem !important;
    }

    /* Compact buttons */
    button {
        padding: 0.5rem 1rem !important;
    }
}

/* 150% Zoom (1.5x) */
@media (min-resolution: 1.5dppx) and (min-width: 1024px),
(max-width: 1280px) and (min-width: 1024px) {

    /* More compact cards */
    [class*="Card"],
    [class*="card"] {
        padding: 0.625rem !important;
    }

    /* Tighter grid gaps */
    .grid {
        gap: 0.5rem !important;
    }

    /* Smaller text */
    h1 {
        font-size: 1.5rem !important;
    }

    h2 {
        font-size: 1.25rem !important;
    }

    h3 {
        font-size: 1.125rem !important;
    }

    p {
        font-size: 0.875rem !important;
    }

    /* Reduce main content padding */
    main {
        padding: 1rem !important;
    }

    /* Compact buttons */
    button {
        padding: 0.375rem 0.75rem !important;
        font-size: 0.875rem !important;
    }

    /* Reduce grid columns on zoom */
    [class*="grid-cols-5"] {
        grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    }

    [class*="grid-cols-4"] {
        grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    }
}

/* 175% Zoom (1.75x) */
@media (min-resolution: 1.75dppx) and (min-width: 1024px),
(max-width: 1100px) and (min-width: 1024px) {

    /* Very compact cards */
    [class*="Card"],
    [class*="card"] {
        padding: 0.5rem !important;
    }

    /* Minimal grid gaps */
    .grid {
        gap: 0.375rem !important;
    }

    /* Smaller text */
    h1 {
        font-size: 1.375rem !important;
    }

    h2 {
        font-size: 1.125rem !important;
    }

    h3 {
        font-size: 1rem !important;
    }

    p {
        font-size: 0.8125rem !important;
    }

    /* Minimal main content padding */
    main {
        padding: 0.75rem !important;
    }

    /* Very compact buttons */
    button {
        padding: 0.25rem 0.5rem !important;
        font-size: 0.8125rem !important;
    }

    /* Further reduce grid columns */
    [class*="grid-cols-5"] {
        grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    }

    [class*="grid-cols-4"] {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }

    [class*="grid-cols-3"] {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }
}

/* 200% Zoom (2x) */
@media (min-resolution: 2dppx) and (min-width: 1024px),
(max-width: 1024px) and (min-width: 900px) {

    /* Ultra compact cards */
    [class*="Card"],
    [class*="card"] {
        padding: 0.375rem !important;
    }

    /* Minimal grid gaps */
    .grid {
        gap: 0.25rem !important;
    }

    /* Smaller text */
    h1 {
        font-size: 1.25rem !important;
    }

    h2 {
        font-size: 1rem !important;
    }

    h3 {
        font-size: 0.875rem !important;
    }

    p {
        font-size: 0.75rem !important;
    }

    /* Minimal main content padding */
    main {
        padding: 0.5rem !important;
    }

    /* Ultra compact buttons */
    button {
        padding: 0.25rem 0.375rem !important;
        font-size: 0.75rem !important;
    }

    /* Minimal grid columns */
    [class*="grid-cols-5"],
    [class*="grid-cols-4"],
    [class*="grid-cols-3"] {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }

    /* Hide less important elements */
    [class*="text-muted-foreground"] {
        font-size: 0.625rem !important;
    }
}

/* Zoom out fixes (< 100%) */
@media (max-resolution: 0.9dppx) {

    /* Increase spacing when zoomed out */
    [class*="Card"],
    [class*="card"] {
        padding: 2rem !important;
    }

    .grid {
        gap: 2rem !important;
    }

    main {
        padding: 2.5rem !important;
    }

    h1 {
        font-size: 2.5rem !important;
    }

    h2 {
        font-size: 2rem !important;
    }

    h3 {
        font-size: 1.75rem !important;
    }
}

/* Ensure content doesn't overflow when zoomed */
* {
    max-width: 100% !important;
}

/* Prevent horizontal scroll at any zoom level */
html,
body,
#root {
    overflow-x: hidden !important;
    max-width: 100vw !important;
}

/* Make sure grids adapt to zoom */
.grid {
    width: 100% !important;
    max-width: 100% !important;
}

.grid>* {
    min-width: 0 !important;
    max-width: 100% !important;
}

/* Ensure text doesn't overflow when zoomed */
h1,
h2,
h3,
h4,
h5,
h6,
p,
span,
div {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
}

/* Make images responsive to zoom */
img {
    max-width: 100% !important;
    height: auto !important;
}

/* Ensure dialogs/modals adapt to zoom */
[role="dialog"] {
    max-width: 95vw !important;
    max-height: 95vh !important;
}

/* Compact stat cards when zoomed */
@media (max-width: 1400px) and (min-width: 1024px) {

    [class*="grid-cols-4"]>[class*="Card"] h3,
    [class*="grid-cols-3"]>[class*="Card"] h3 {
        font-size: 1rem !important;
    }

    [class*="grid-cols-4"]>[class*="Card"] p,
    [class*="grid-cols-3"]>[class*="Card"] p {
        font-size: 0.75rem !important;
    }
}

/* Very compact stat cards when heavily zoomed */
@media (max-width: 1200px) and (min-width: 1024px) {

    [class*="grid-cols-4"]>[class*="Card"],
    [class*="grid-cols-3"]>[class*="Card"] {
        padding: 0.5rem !important;
    }

    [class*="grid-cols-4"]>[class*="Card"] h3,
    [class*="grid-cols-3"]>[class*="Card"] h3 {
        font-size: 0.875rem !important;
    }

    [class*="grid-cols-4"]>[class*="Card"] p,
    [class*="grid-cols-3"]>[class*="Card"] p {
        font-size: 0.625rem !important;
    }

    [class*="grid-cols-4"]>[class*="Card"] svg,
    [class*="grid-cols-3"]>[class*="Card"] svg {
        width: 1rem !important;
        height: 1rem !important;
    }
}